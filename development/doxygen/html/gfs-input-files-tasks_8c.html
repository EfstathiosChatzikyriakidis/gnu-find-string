<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GNU find string: src/gfs-input-files-tasks.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<h1>src/gfs-input-files-tasks.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This interface deals with the checking of input files. 
<p>

<p>
Definition in file <a class="el" href="gfs-input-files-tasks_8c-source.html">gfs-input-files-tasks.c</a>.
<p>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &quot;<a class="el" href="gfs-typedefs_8h-source.html">gfs-typedefs.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="gfs-input-files-list_8h-source.html">gfs-input-files-list.h</a>&quot;</code><br>

<p>
<a href="gfs-input-files-tasks_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="gfs-input-files-tasks_8c.html#06fc87d81c62e9abb8790b6e5713c55bca8595e6072069addc7b1a845d1cc814">BIN_BUF_LEN</a> =  512
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constants used from the interface.  <a href="gfs-input-files-tasks_8c.html#06fc87d81c62e9abb8790b6e5713c55b">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-input-files-tasks_8c.html#9b97905dd74e511857c0f5dfcfeac75f">check_input_file</a> (<a class="el" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a> filepath)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that checks if a file is acceptable.  <a href="#9b97905dd74e511857c0f5dfcfeac75f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-input-files-tasks_8c.html#4326f1dbc926b0fdec17176a78caab14">get_file_type</a> (<a class="el" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a> filepath)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that gets the type of a file.  <a href="#4326f1dbc926b0fdec17176a78caab14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-input-files-tasks_8c.html#2ea43c2aa72ca9a50fe71c059e868913">file_regular</a> (<a class="el" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a> filepath)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that checks if a file is binary or not.  <a href="#2ea43c2aa72ca9a50fe71c059e868913"></a><br></td></tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="06fc87d81c62e9abb8790b6e5713c55b"></a><!-- doxytag: member="gfs-input-files-tasks.c::@0" ref="06fc87d81c62e9abb8790b6e5713c55b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constants used from the interface. 
<p>
This anonymous enumeration is used from the interface in order to specify some constants. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="06fc87d81c62e9abb8790b6e5713c55bca8595e6072069addc7b1a845d1cc814"></a><!-- doxytag: member="BIN_BUF_LEN" ref="06fc87d81c62e9abb8790b6e5713c55bca8595e6072069addc7b1a845d1cc814" args="" -->BIN_BUF_LEN</em>&nbsp;</td><td>
Binary buffer length. </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="gfs-input-files-tasks_8c-source.html#l00117">117</a> of file <a class="el" href="gfs-input-files-tasks_8c-source.html">gfs-input-files-tasks.c</a>.<div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119   <a class="code" href="gfs-input-files-tasks_8c.html#06fc87d81c62e9abb8790b6e5713c55bca8595e6072069addc7b1a845d1cc814">BIN_BUF_LEN</a> = 512             
<a name="l00120"></a>00120 };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="9b97905dd74e511857c0f5dfcfeac75f"></a><!-- doxytag: member="gfs-input-files-tasks.c::check_input_file" ref="9b97905dd74e511857c0f5dfcfeac75f" args="(cstring filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a> check_input_file           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a>&nbsp;</td>
          <td class="paramname"> <em>filepath</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that checks if a file is acceptable. 
<p>
This function checks if a file (`filepath') is acceptable. That means, that it is a readable and regular ascii file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>a `cstring' type definition.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A `FILE_INFO' enumeration value. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-input-files-tasks_8c-source.html#l00058">58</a> of file <a class="el" href="gfs-input-files-tasks_8c-source.html">gfs-input-files-tasks.c</a>.
<p>
References <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076d3a35180d0a91390dc45bf435900966d">f_accessible</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076151af81f1496ad7c76fef1d5a8c3b3f8">f_ascii</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240762f9f09023f11a805c6ece706496b8651">f_inaccessible</a>, <a class="el" href="gfs-input-files-list_8h-source.html#l00055">f_io_error</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240767efc48e082b3891f4448e8f0abf4a016">f_regular</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076729e71ef9f7da26bee9eadd8e8d96f8b">f_unknown</a>, <a class="el" href="gfs-input-files-tasks_8c-source.html#l00139">file_regular()</a>, and <a class="el" href="gfs-input-files-tasks_8c-source.html#l00211">get_file_type()</a>.
<p>
Referenced by <a class="el" href="gfs-parse-input-files_8c-source.html#l00057">parse_input_files()</a>.<div class="fragment"><pre class="fragment"><a name="l00059"></a>00059 {
<a name="l00060"></a>00060   <span class="comment">/* is used for system's routine `access'. */</span>
<a name="l00061"></a>00061   <span class="keyword">register</span> <span class="keywordtype">int</span> aval;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="comment">/* is used in order to know the info of the file. */</span>
<a name="l00064"></a>00064   <a class="code" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a> finfo;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066   <span class="comment">/* check if the file exists. */</span>
<a name="l00067"></a>00067   aval = access (filepath, F_OK);
<a name="l00068"></a>00068   <span class="keywordflow">if</span> (aval != 0)
<a name="l00069"></a>00069     {
<a name="l00070"></a>00070       <span class="keywordflow">if</span> (errno == ENOENT)
<a name="l00071"></a>00071         <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076729e71ef9f7da26bee9eadd8e8d96f8b">f_unknown</a>;       <span class="comment">/* file doesn't exist. */</span>
<a name="l00072"></a>00072       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EACCES)
<a name="l00073"></a>00073         <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240762f9f09023f11a805c6ece706496b8651">f_inaccessible</a>;  <span class="comment">/* we cannot access it. */</span>
<a name="l00074"></a>00074       <span class="keywordflow">else</span>
<a name="l00075"></a>00075         <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076caebb888bdc7767afd5a863bc6f3354b">f_io_error</a>;      <span class="comment">/* an i/o problem occured. */</span>
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <span class="comment">/* check if the file is readable. */</span>
<a name="l00079"></a>00079   aval = access (filepath, R_OK);
<a name="l00080"></a>00080   <span class="keywordflow">if</span> (aval != 0)
<a name="l00081"></a>00081     <span class="comment">/* we cannot read it. */</span>
<a name="l00082"></a>00082     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240762f9f09023f11a805c6ece706496b8651">f_inaccessible</a>;
<a name="l00083"></a>00083   <span class="keywordflow">else</span>
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085       <span class="comment">/* get the info of the file. */</span>
<a name="l00086"></a>00086       finfo = <a class="code" href="gfs-input-files-tasks_8c.html#4326f1dbc926b0fdec17176a78caab14">get_file_type</a> (filepath);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088       <span class="comment">/* if it is a regular file. */</span>
<a name="l00089"></a>00089       <span class="keywordflow">if</span> (finfo == <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240767efc48e082b3891f4448e8f0abf4a016">f_regular</a>)
<a name="l00090"></a>00090         {
<a name="l00091"></a>00091           <span class="comment">/* get the type of regular</span>
<a name="l00092"></a>00092 <span class="comment">             file (ascii or binary). */</span>
<a name="l00093"></a>00093           finfo = <a class="code" href="gfs-input-files-tasks_8c.html#2ea43c2aa72ca9a50fe71c059e868913">file_regular</a> (filepath);
<a name="l00094"></a>00094           <span class="keywordflow">if</span> (finfo == <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076151af81f1496ad7c76fef1d5a8c3b3f8">f_ascii</a>)
<a name="l00095"></a>00095             <span class="comment">/* we accept the input file. */</span>
<a name="l00096"></a>00096             <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076d3a35180d0a91390dc45bf435900966d">f_accessible</a>;
<a name="l00097"></a>00097           <span class="keywordflow">else</span>
<a name="l00098"></a>00098             <span class="comment">/* return the info of the file. */</span>
<a name="l00099"></a>00099             <span class="keywordflow">return</span> finfo;
<a name="l00100"></a>00100         }
<a name="l00101"></a>00101       <span class="keywordflow">else</span>
<a name="l00102"></a>00102         <span class="comment">/* return the info of the file. */</span>
<a name="l00103"></a>00103         <span class="keywordflow">return</span> finfo;
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">/* if the control flow reaches</span>
<a name="l00107"></a>00107 <span class="comment">     here do not accept the file. */</span>
<a name="l00108"></a>00108   <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240762f9f09023f11a805c6ece706496b8651">f_inaccessible</a>;
<a name="l00109"></a>00109 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2ea43c2aa72ca9a50fe71c059e868913"></a><!-- doxytag: member="gfs-input-files-tasks.c::file_regular" ref="2ea43c2aa72ca9a50fe71c059e868913" args="(cstring filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a> file_regular           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a>&nbsp;</td>
          <td class="paramname"> <em>filepath</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that checks if a file is binary or not. 
<p>
This function checks if an input file (`filepath') is binary or ascii. Specifically, it reads the first `BIN_BUF_LEN' characters of the file and checks if there are any non ascii characters. If there is at least one, then returns that the file is binary. But, if there aren't any non-ascii characters then, returns that the file is ascii.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>a `cstring' type definition.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A `FILE_INFO' enumeration value. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-input-files-tasks_8c-source.html#l00139">139</a> of file <a class="el" href="gfs-input-files-tasks_8c-source.html">gfs-input-files-tasks.c</a>.
<p>
References <a class="el" href="gfs-input-files-tasks_8c-source.html#l00119">BIN_BUF_LEN</a>, <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00235">efopen()</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076151af81f1496ad7c76fef1d5a8c3b3f8">f_ascii</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240760011419859fb54059fc35d65eedead64">f_binary</a>, and <a class="el" href="gfs-input-files-list_8h-source.html#l00055">f_io_error</a>.
<p>
Referenced by <a class="el" href="gfs-input-files-tasks_8c-source.html#l00058">check_input_file()</a>.<div class="fragment"><pre class="fragment"><a name="l00140"></a>00140 {
<a name="l00141"></a>00141   <span class="comment">/* externs. */</span>
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   <span class="comment">/* function externs. */</span>
<a name="l00144"></a>00144   <span class="keyword">extern</span> FILE *<a class="code" href="gfs-error-wrapper-funcs_8c.html#db1ec23800a30e261493f972cf509284">efopen</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   <span class="comment">/* the buffer of characters. */</span>
<a name="l00147"></a>00147   <span class="keyword">static</span> <a class="code" href="gfs-typedefs_8h.html#86a4b5380e358b45113e47f1340c1a56">uchar</a> buf[<a class="code" href="gfs-input-files-tasks_8c.html#06fc87d81c62e9abb8790b6e5713c55bca8595e6072069addc7b1a845d1cc814">BIN_BUF_LEN</a>];
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   <span class="comment">/* temporary help variables. */</span>
<a name="l00150"></a>00150   <span class="keyword">register</span> <a class="code" href="gfs-typedefs_8h.html#1398ea0e48e059bf4db2f4bcd7eb31fa">ulong</a> i, n;
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="comment">/* this is a pointer to the file. */</span>
<a name="l00153"></a>00153   FILE *fp = NULL;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   <span class="comment">/* try to open the file. */</span>
<a name="l00156"></a>00156   <span class="keywordflow">if</span> ((fp = <a class="code" href="gfs-error-wrapper-funcs_8c.html#db1ec23800a30e261493f972cf509284">efopen</a> (filepath, <span class="stringliteral">"r"</span>)) == NULL)
<a name="l00157"></a>00157     <span class="comment">/* an error occured. */</span>
<a name="l00158"></a>00158     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076caebb888bdc7767afd5a863bc6f3354b">f_io_error</a>;
<a name="l00159"></a>00159 
<a name="l00160"></a>00160   <span class="comment">/* try to read from the file. */</span>
<a name="l00161"></a>00161   n = fread (buf, <span class="keyword">sizeof</span> (buf[0]), <span class="keyword">sizeof</span> (buf), fp);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   <span class="comment">/* there was a problem with the reading. */</span>
<a name="l00164"></a>00164   <span class="keywordflow">if</span> (n &lt; <a class="code" href="gfs-input-files-tasks_8c.html#06fc87d81c62e9abb8790b6e5713c55bca8595e6072069addc7b1a845d1cc814">BIN_BUF_LEN</a>)
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166       <span class="comment">/* close the file. */</span>
<a name="l00167"></a>00167       <span class="keywordflow">if</span> (fp != NULL)
<a name="l00168"></a>00168         fclose (fp);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170       <span class="comment">/* an error occured. */</span>
<a name="l00171"></a>00171       <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076caebb888bdc7767afd5a863bc6f3354b">f_io_error</a>;
<a name="l00172"></a>00172     }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174   <span class="comment">/* check each character if it is binary. */</span>
<a name="l00175"></a>00175   <span class="keywordflow">for</span> (i = 0L; i &lt; n; i++)
<a name="l00176"></a>00176     <span class="keywordflow">if</span> (!isprint (buf[i]) &amp;&amp;    <span class="comment">/* is not printable character. */</span>
<a name="l00177"></a>00177         !isspace (buf[i]) &amp;&amp;    <span class="comment">/* is not a space character. */</span>
<a name="l00178"></a>00178         !ispunct (buf[i]) &amp;&amp;    <span class="comment">/* is not a punctuation character. */</span>
<a name="l00179"></a>00179         !isalnum (buf[i]) &amp;&amp;    <span class="comment">/* is not an alphabetic, digit character. */</span>
<a name="l00180"></a>00180         iscntrl (buf[i]))       <span class="comment">/* is a control character. */</span>
<a name="l00181"></a>00181       {
<a name="l00182"></a>00182         <span class="comment">/* close the file. */</span>
<a name="l00183"></a>00183         <span class="keywordflow">if</span> (fp != NULL)
<a name="l00184"></a>00184           fclose (fp);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186         <span class="comment">/* the file is a regular binary file. */</span>
<a name="l00187"></a>00187         <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240760011419859fb54059fc35d65eedead64">f_binary</a>;
<a name="l00188"></a>00188       }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="comment">/* close the file. */</span>
<a name="l00191"></a>00191   <span class="keywordflow">if</span> (fp != NULL)
<a name="l00192"></a>00192     fclose (fp);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="comment">/* the file is a regular ascii file. */</span>
<a name="l00195"></a>00195   <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076151af81f1496ad7c76fef1d5a8c3b3f8">f_ascii</a>;
<a name="l00196"></a>00196 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4326f1dbc926b0fdec17176a78caab14"></a><!-- doxytag: member="gfs-input-files-tasks.c::get_file_type" ref="4326f1dbc926b0fdec17176a78caab14" args="(cstring filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="gfs-input-files-list_8h.html#d674d1db3f21183ba1fa027fa0325b34">FILE_INFO</a> get_file_type           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a>&nbsp;</td>
          <td class="paramname"> <em>filepath</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that gets the type of a file. 
<p>
This function tries to get the type of a file (`filepath'). After that, it returns the type.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>a `cstring' type definition.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A `FILE_INFO' enumeration value. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-input-files-tasks_8c-source.html#l00211">211</a> of file <a class="el" href="gfs-input-files-tasks_8c-source.html">gfs-input-files-tasks.c</a>.
<p>
References <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076bb919c5a4a697583aaed19e667078722">f_block</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef2407615bcd5d2a08edc36ea7df158fb3c7c0b">f_character</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076e56be29e66e3c9cec7fa590812740c72">f_directory</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076d36ffcba4399c07801608553518b811e">f_fifo</a>, <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240762f9f09023f11a805c6ece706496b8651">f_inaccessible</a>, <a class="el" href="gfs-input-files-list_8h-source.html#l00055">f_io_error</a>, and <a class="el" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240767efc48e082b3891f4448e8f0abf4a016">f_regular</a>.
<p>
Referenced by <a class="el" href="gfs-input-files-tasks_8c-source.html#l00058">check_input_file()</a>.<div class="fragment"><pre class="fragment"><a name="l00212"></a>00212 {
<a name="l00213"></a>00213   <span class="comment">/* buffer for keeping file info. */</span>
<a name="l00214"></a>00214   <span class="keyword">struct </span>stat stbuf;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <span class="comment">/* get the information of the file. */</span>
<a name="l00217"></a>00217   <span class="keywordflow">if</span> (stat (filepath, &amp;stbuf) == -1)
<a name="l00218"></a>00218     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076caebb888bdc7767afd5a863bc6f3354b">f_io_error</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220   <span class="comment">/* return the appropriate type of the file. */</span>
<a name="l00221"></a>00221   <span class="keywordflow">if</span> (S_ISREG (stbuf.st_mode))
<a name="l00222"></a>00222     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240767efc48e082b3891f4448e8f0abf4a016">f_regular</a>;
<a name="l00223"></a>00223   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISDIR (stbuf.st_mode))
<a name="l00224"></a>00224     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076e56be29e66e3c9cec7fa590812740c72">f_directory</a>;
<a name="l00225"></a>00225   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISBLK (stbuf.st_mode))
<a name="l00226"></a>00226     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076bb919c5a4a697583aaed19e667078722">f_block</a>;
<a name="l00227"></a>00227   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISCHR (stbuf.st_mode))
<a name="l00228"></a>00228     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef2407615bcd5d2a08edc36ea7df158fb3c7c0b">f_character</a>;
<a name="l00229"></a>00229   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISFIFO (stbuf.st_mode))
<a name="l00230"></a>00230     <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef24076d36ffcba4399c07801608553518b811e">f_fifo</a>;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232   <span class="comment">/* if the control flow reaches</span>
<a name="l00233"></a>00233 <span class="comment">     here assume it as a bizarre. */</span>
<a name="l00234"></a>00234   <span class="keywordflow">return</span> <a class="code" href="gfs-input-files-list_8h.html#80ca259985bbf3f2060c2bfb1ef240762f9f09023f11a805c6ece706496b8651">f_inaccessible</a>;
<a name="l00235"></a>00235 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed May 7 19:14:36 2008 for GNU find string by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
