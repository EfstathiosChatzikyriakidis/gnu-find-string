<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GNU find string: src/gfs-process-input-files.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<h1>src/gfs-process-input-files.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This interface deals with the processing of input files. 
<p>

<p>
Definition in file <a class="el" href="gfs-process-input-files_8c-source.html">gfs-process-input-files.c</a>.
<p>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;libintl.h&gt;</code><br>
<code>#include &quot;<a class="el" href="gfs-defines_8h-source.html">gfs-defines.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="gfs-i18n-macros_8h-source.html">gfs-i18n-macros.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="gfs-typedefs_8h-source.html">gfs-typedefs.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="gfs-options_8h-source.html">gfs-options.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="gfs-input-files-list_8h-source.html">gfs-input-files-list.h</a>&quot;</code><br>

<p>
<a href="gfs-process-input-files_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a> =  1024 * 1024
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constants used from the interface.  <a href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="gfs-typedefs_8h.html#3e5b8192e7d9ffaf3542f1210aec18dd">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-process-input-files_8c.html#92fa875ce8c8b7789b503b6b056d58c3">process_input_files</a> (<a class="el" href="structinput__fileT.html">INPUT_FILES</a> *listp, <a class="el" href="structoptionsT.html">OPTIONS</a> *cop)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that process the linked list input files.  <a href="#92fa875ce8c8b7789b503b6b056d58c3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="gfs-typedefs_8h.html#3e5b8192e7d9ffaf3542f1210aec18dd">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-process-input-files_8c.html#9065b0a3f99c1ec2525cd9d1a7f17aea">process_input_file</a> (FILE *input, <a class="el" href="structoptionsT.html">OPTIONS</a> *cop)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that process the data from an input stream.  <a href="#9065b0a3f99c1ec2525cd9d1a7f17aea"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-process-input-files_8c.html#044e6231e3d69752428732e2da59cc5b">strlwr</a> (char *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that gets a string and returns it in lowercase.  <a href="#044e6231e3d69752428732e2da59cc5b"></a><br></td></tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="df764cbdea00d65edcd07bb9953ad2b7"></a><!-- doxytag: member="gfs-process-input-files.c::@1" ref="df764cbdea00d65edcd07bb9953ad2b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constants used from the interface. 
<p>
This anonymous enumeration is used from the interface in order to specify some constants. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b"></a><!-- doxytag: member="MAX_LINE" ref="df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b" args="" -->MAX_LINE</em>&nbsp;</td><td>
Max line characters (1Mbyte). </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="gfs-process-input-files_8c-source.html#l00048">48</a> of file <a class="el" href="gfs-process-input-files_8c-source.html">gfs-process-input-files.c</a>.<div class="fragment"><pre class="fragment"><a name="l00049"></a>00049 {
<a name="l00050"></a>00050   <a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a> = 1024 * 1024        
<a name="l00051"></a>00051 };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="9065b0a3f99c1ec2525cd9d1a7f17aea"></a><!-- doxytag: member="gfs-process-input-files.c::process_input_file" ref="9065b0a3f99c1ec2525cd9d1a7f17aea" args="(FILE *input, OPTIONS *cop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gfs-typedefs_8h.html#3e5b8192e7d9ffaf3542f1210aec18dd">BOOL</a> process_input_file           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structoptionsT.html">OPTIONS</a> *&nbsp;</td>
          <td class="paramname"> <em>cop</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that process the data from an input stream. 
<p>
This function process the `input' stream. It reads data (line by line) and checks if the current line matches to the pattern that user has given. Also, it keeps in mind all the command line args (`cop'). At the end, if there isn't any match found it returns `true'. Otherwise, it returns `false'.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input</em>&nbsp;</td><td>a pointer to a `FILE' data structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cop</em>&nbsp;</td><td>a pointer to a `OPTIONS' data structure.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A `BOOL' enumeration value (`false', `true'). </dd></dl>

<p>
Definition at line <a class="el" href="gfs-process-input-files_8c-source.html#l00347">347</a> of file <a class="el" href="gfs-process-input-files_8c-source.html">gfs-process-input-files.c</a>.
<p>
References <a class="el" href="gfs-i18n-macros_8h-source.html#l00037">_</a>, <a class="el" href="gfs-options_8h-source.html#l00084">optionsT::ignore_case</a>, <a class="el" href="gfs-options_8h-source.html#l00075">optionsT::line_number</a>, <a class="el" href="gfs-process-input-files_8c-source.html#l00050">MAX_LINE</a>, <a class="el" href="gfs-options_8h-source.html#l00066">optionsT::max_matches</a>, <a class="el" href="gfs-defines_8h-source.html#l00069">NEW_LINE</a>, <a class="el" href="gfs-options_8h-source.html#l00093">optionsT::pattern</a>, <a class="el" href="gfs-options_8h-source.html#l00057">optionsT::reverse_match</a>, <a class="el" href="gfs-messages_8c-source.html#l00150">show_max_matches</a>, and <a class="el" href="gfs-process-input-files_8c-source.html#l00503">strlwr()</a>.
<p>
Referenced by <a class="el" href="gfs_8c-source.html#l00083">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00348"></a>00348 {
<a name="l00349"></a>00349   <span class="comment">/* externs. */</span>
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="comment">/* variable externs. */</span>
<a name="l00352"></a>00352   <span class="keyword">extern</span> <a class="code" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a> <a class="code" href="gfs-messages_8c.html#bb023f3c941ac0bf73cb73750a1f74cf">show_max_matches</a>;
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="comment">/* local variables. */</span>
<a name="l00355"></a>00355 
<a name="l00356"></a>00356   <span class="comment">/* current line of chars within a file. */</span>
<a name="l00357"></a>00357   <span class="keywordtype">char</span> data_line_init[<a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a>] = { <span class="charliteral">'\0'</span> };
<a name="l00358"></a>00358   <span class="keywordtype">char</span> data_line_case[<a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a>] = { <span class="charliteral">'\0'</span> };
<a name="l00359"></a>00359 
<a name="l00360"></a>00360   <span class="comment">/* do we have at least one match? */</span>
<a name="l00361"></a>00361   <a class="code" href="gfs-typedefs_8h.html#3e5b8192e7d9ffaf3542f1210aec18dd">BOOL</a> found_match = <span class="keyword">false</span>;
<a name="l00362"></a>00362 
<a name="l00363"></a>00363   <span class="comment">/* current line in the input file. */</span>
<a name="l00364"></a>00364   <span class="keyword">register</span> <a class="code" href="gfs-typedefs_8h.html#1398ea0e48e059bf4db2f4bcd7eb31fa">ulong</a> curr_line = 0L;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366   <span class="comment">/* number of matches in the input file. */</span>
<a name="l00367"></a>00367   <span class="keyword">register</span> <a class="code" href="gfs-typedefs_8h.html#1398ea0e48e059bf4db2f4bcd7eb31fa">ulong</a> num_match = 0L;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369   <span class="comment">/* if user wants case insensitive string search. */</span>
<a name="l00370"></a>00370   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00371"></a>00371     <a class="code" href="gfs-process-input-files_8c.html#044e6231e3d69752428732e2da59cc5b">strlwr</a> (cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>);
<a name="l00372"></a>00372 
<a name="l00373"></a>00373   <span class="comment">/* process input. */</span>
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <span class="comment">/* start fetching lines from file until EOF found. */</span>
<a name="l00376"></a>00376   <span class="keywordflow">while</span> (fgets (data_line_init, <a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a>, input) != NULL)
<a name="l00377"></a>00377     {
<a name="l00378"></a>00378       <span class="comment">/* get current line number. */</span>
<a name="l00379"></a>00379       ++curr_line;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381       <span class="comment">/* user wants case insensitive keep</span>
<a name="l00382"></a>00382 <span class="comment">         a lowercase version of the line. */</span>
<a name="l00383"></a>00383       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00384"></a>00384         <a class="code" href="gfs-process-input-files_8c.html#044e6231e3d69752428732e2da59cc5b">strlwr</a> (strcpy (data_line_case, data_line_init));
<a name="l00385"></a>00385 
<a name="l00386"></a>00386       <span class="comment">/* if user wants to display the lines</span>
<a name="l00387"></a>00387 <span class="comment">         that do not match with the pattern. */</span>
<a name="l00388"></a>00388       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#367cc032c8b7f86d94fc8ac8c35b12d2">reverse_match</a>)
<a name="l00389"></a>00389         {
<a name="l00390"></a>00390           <span class="comment">/* if user wants to ignore case distinctions. */</span>
<a name="l00391"></a>00391           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00392"></a>00392             {
<a name="l00393"></a>00393               <span class="keywordflow">if</span> (strstr (data_line_case, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) == NULL)
<a name="l00394"></a>00394                 {
<a name="l00395"></a>00395                   <span class="comment">/* user wants to print the line number. */</span>
<a name="l00396"></a>00396                   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00397"></a>00397                     fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399                   <span class="comment">/* print the data line. */</span>
<a name="l00400"></a>00400                   fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00401"></a>00401 
<a name="l00402"></a>00402                   <span class="comment">/* increase the cnt of max</span>
<a name="l00403"></a>00403 <span class="comment">                     matches within the file. */</span>
<a name="l00404"></a>00404                   ++num_match;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406                   <span class="comment">/* this is for informing the caller</span>
<a name="l00407"></a>00407 <span class="comment">                     that at least one match occurred. */</span>
<a name="l00408"></a>00408                   found_match = <span class="keyword">true</span>;
<a name="l00409"></a>00409                 }
<a name="l00410"></a>00410             }
<a name="l00411"></a>00411           <span class="keywordflow">else</span>
<a name="l00412"></a>00412             {
<a name="l00413"></a>00413               <span class="keywordflow">if</span> (strstr (data_line_init, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) == NULL)
<a name="l00414"></a>00414                 {
<a name="l00415"></a>00415                   <span class="comment">/* user wants to print the line number. */</span>
<a name="l00416"></a>00416                   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00417"></a>00417                     fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419                   <span class="comment">/* print the data line. */</span>
<a name="l00420"></a>00420                   fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00421"></a>00421 
<a name="l00422"></a>00422                   <span class="comment">/* increase the cnt of max</span>
<a name="l00423"></a>00423 <span class="comment">                     matches within the file. */</span>
<a name="l00424"></a>00424                   ++num_match;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426                   <span class="comment">/* this is for informing the caller</span>
<a name="l00427"></a>00427 <span class="comment">                     that at least one match occurred. */</span>
<a name="l00428"></a>00428                   found_match = <span class="keyword">true</span>;
<a name="l00429"></a>00429                 }
<a name="l00430"></a>00430             }
<a name="l00431"></a>00431         }
<a name="l00432"></a>00432       <span class="comment">/* otherwise, print the line</span>
<a name="l00433"></a>00433 <span class="comment">         that matches with pattern. */</span>
<a name="l00434"></a>00434       <span class="keywordflow">else</span>
<a name="l00435"></a>00435         {
<a name="l00436"></a>00436           <span class="comment">/* if user wants to ignore case distinctions. */</span>
<a name="l00437"></a>00437           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00438"></a>00438             {
<a name="l00439"></a>00439               <span class="keywordflow">if</span> (strstr (data_line_case, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) != NULL)
<a name="l00440"></a>00440                 {
<a name="l00441"></a>00441                   <span class="comment">/* user wants to print the line number. */</span>
<a name="l00442"></a>00442                   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00443"></a>00443                     fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00444"></a>00444 
<a name="l00445"></a>00445                   <span class="comment">/* print the data line. */</span>
<a name="l00446"></a>00446                   fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448                   <span class="comment">/* increase the cnt of max</span>
<a name="l00449"></a>00449 <span class="comment">                     matches within the file. */</span>
<a name="l00450"></a>00450                   ++num_match;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452                   <span class="comment">/* this is for informing the caller</span>
<a name="l00453"></a>00453 <span class="comment">                     that at least one match occurred. */</span>
<a name="l00454"></a>00454                   found_match = <span class="keyword">true</span>;
<a name="l00455"></a>00455                 }
<a name="l00456"></a>00456             }
<a name="l00457"></a>00457           <span class="keywordflow">else</span>
<a name="l00458"></a>00458             {
<a name="l00459"></a>00459               <span class="keywordflow">if</span> (strstr (data_line_init, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) != NULL)
<a name="l00460"></a>00460                 {
<a name="l00461"></a>00461                   <span class="comment">/* user wants to print the line number. */</span>
<a name="l00462"></a>00462                   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00463"></a>00463                     fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00464"></a>00464 
<a name="l00465"></a>00465                   <span class="comment">/* print the data line. */</span>
<a name="l00466"></a>00466                   fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468                   <span class="comment">/* increase the cnt of max</span>
<a name="l00469"></a>00469 <span class="comment">                     matches within the file. */</span>
<a name="l00470"></a>00470                   ++num_match;
<a name="l00471"></a>00471 
<a name="l00472"></a>00472                   <span class="comment">/* this is for informing the caller</span>
<a name="l00473"></a>00473 <span class="comment">                     that at least one match occurred. */</span>
<a name="l00474"></a>00474                   found_match = <span class="keyword">true</span>;
<a name="l00475"></a>00475                 }
<a name="l00476"></a>00476             }
<a name="l00477"></a>00477         }
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480   <span class="comment">/* print only if at least one match found and</span>
<a name="l00481"></a>00481 <span class="comment">     user wants to print the number of matches. */</span>
<a name="l00482"></a>00482   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#c27b7ce68def681e2bb1c747e3aec856">max_matches</a> &amp;&amp; num_match)
<a name="l00483"></a>00483     fprintf (stdout, <span class="stringliteral">"%s %lu.%s"</span>, <a class="code" href="gfs-i18n-macros_8h.html#32a3cf3d9dd914f5aeeca5423c157934">_</a>(show_max_matches), num_match, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <span class="comment">/* return status to the caller. */</span>
<a name="l00486"></a>00486   <span class="keywordflow">return</span> found_match;
<a name="l00487"></a>00487 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="92fa875ce8c8b7789b503b6b056d58c3"></a><!-- doxytag: member="gfs-process-input-files.c::process_input_files" ref="92fa875ce8c8b7789b503b6b056d58c3" args="(INPUT_FILES *listp, OPTIONS *cop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gfs-typedefs_8h.html#3e5b8192e7d9ffaf3542f1210aec18dd">BOOL</a> process_input_files           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinput__fileT.html">INPUT_FILES</a> *&nbsp;</td>
          <td class="paramname"> <em>listp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structoptionsT.html">OPTIONS</a> *&nbsp;</td>
          <td class="paramname"> <em>cop</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that process the linked list input files. 
<p>
This function process the linked list input files (`listp'). For each input file, reads data (line by line) and checks if the current line matches to the pattern that user has given. Also, this function keeps in mind all the command line arguments (`cop'). At the end, if there is no match found it returns `true'. Otherwise, it returns `false'.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>listp</em>&nbsp;</td><td>a pointer to a `INPUT_FILES' data structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cop</em>&nbsp;</td><td>a pointer to a `OPTIONS' data structure.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A `BOOL' enumeration value (`false', `true'). </dd></dl>

<p>
Definition at line <a class="el" href="gfs-process-input-files_8c-source.html#l00077">77</a> of file <a class="el" href="gfs-process-input-files_8c-source.html">gfs-process-input-files.c</a>.
<p>
References <a class="el" href="gfs-i18n-macros_8h-source.html#l00037">_</a>, <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00235">efopen()</a>, <a class="el" href="gfs-options_8h-source.html#l00084">optionsT::ignore_case</a>, <a class="el" href="gfs-options_8h-source.html#l00075">optionsT::line_number</a>, <a class="el" href="gfs-process-input-files_8c-source.html#l00050">MAX_LINE</a>, <a class="el" href="gfs-options_8h-source.html#l00066">optionsT::max_matches</a>, <a class="el" href="gfs-defines_8h-source.html#l00069">NEW_LINE</a>, <a class="el" href="gfs-input-files-list_8h-source.html#l00098">input_fileT::next</a>, <a class="el" href="gfs-input-files-list_8h-source.html#l00089">input_fileT::path</a>, <a class="el" href="gfs-options_8h-source.html#l00093">optionsT::pattern</a>, <a class="el" href="gfs-input-files-list_8h-source.html#l00079">input_fileT::ptr</a>, <a class="el" href="gfs-options_8h-source.html#l00057">optionsT::reverse_match</a>, <a class="el" href="gfs-messages_8c-source.html#l00150">show_max_matches</a>, <a class="el" href="gfs-process-input-files_8c-source.html#l00503">strlwr()</a>, <a class="el" href="gfs-defines_8h-source.html#l00078">TAB_SPACE</a>, and <a class="el" href="gfs-options_8h-source.html#l00048">optionsT::verbose</a>.
<p>
Referenced by <a class="el" href="gfs_8c-source.html#l00083">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079   <span class="comment">/* externs. */</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   <span class="comment">/* variable externs. */</span>
<a name="l00082"></a>00082   <span class="keyword">extern</span> <a class="code" href="gfs-typedefs_8h.html#7e8652c925c3b148efad2dc6f31f2730">cstring</a> <a class="code" href="gfs-messages_8c.html#bb023f3c941ac0bf73cb73750a1f74cf">show_max_matches</a>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <span class="comment">/* function externs. */</span>
<a name="l00085"></a>00085   <span class="keyword">extern</span> FILE *<a class="code" href="gfs-error-wrapper-funcs_8c.html#db1ec23800a30e261493f972cf509284">efopen</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   <span class="comment">/* local variables. */</span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="comment">/* current line of chars within a file. */</span>
<a name="l00090"></a>00090   <span class="keywordtype">char</span> data_line_init[<a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a>] = { <span class="charliteral">'\0'</span> };
<a name="l00091"></a>00091   <span class="keywordtype">char</span> data_line_case[<a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a>] = { <span class="charliteral">'\0'</span> };
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   <span class="comment">/* do we have at least one match? */</span>
<a name="l00094"></a>00094   <a class="code" href="gfs-typedefs_8h.html#3e5b8192e7d9ffaf3542f1210aec18dd">BOOL</a> found_match = <span class="keyword">false</span>;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   <span class="comment">/* current line in the input file. */</span>
<a name="l00097"></a>00097   <span class="keyword">register</span> <a class="code" href="gfs-typedefs_8h.html#1398ea0e48e059bf4db2f4bcd7eb31fa">ulong</a> curr_line = 0L;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   <span class="comment">/* number of matches in the input file. */</span>
<a name="l00100"></a>00100   <span class="keyword">register</span> <a class="code" href="gfs-typedefs_8h.html#1398ea0e48e059bf4db2f4bcd7eb31fa">ulong</a> num_match = 0L;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102   <span class="comment">/* if user wants case insensitive string search. */</span>
<a name="l00103"></a>00103   <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00104"></a>00104     <a class="code" href="gfs-process-input-files_8c.html#044e6231e3d69752428732e2da59cc5b">strlwr</a> (cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">/* process input files. */</span>
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <span class="comment">/* walk through the input files linked list. */</span>
<a name="l00109"></a>00109   <span class="keywordflow">while</span> (listp != NULL)
<a name="l00110"></a>00110     {
<a name="l00111"></a>00111       <span class="keywordflow">if</span> ((listp-&gt;<a class="code" href="structinput__fileT.html#eb1a91dddf0a705640e299ada805f551">ptr</a> = <a class="code" href="gfs-error-wrapper-funcs_8c.html#db1ec23800a30e261493f972cf509284">efopen</a> (listp-&gt;<a class="code" href="structinput__fileT.html#214eacec14e22abf4b0e35884c992276">path</a>, <span class="stringliteral">"r"</span>)) == NULL)
<a name="l00112"></a>00112         {
<a name="l00113"></a>00113           <span class="comment">/* move to the next list node. */</span>
<a name="l00114"></a>00114           listp = listp-&gt;<a class="code" href="structinput__fileT.html#512580cef586042233fd96943124bb41">next</a>;
<a name="l00115"></a>00115           <span class="keywordflow">continue</span>;
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118       <span class="comment">/* if verbose option is enabled </span>
<a name="l00119"></a>00119 <span class="comment">         print now the input file path. */</span>
<a name="l00120"></a>00120       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00121"></a>00121         fprintf (stdout, <span class="stringliteral">" * [%s]%s"</span>, listp-&gt;<a class="code" href="structinput__fileT.html#214eacec14e22abf4b0e35884c992276">path</a>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00122"></a>00122 
<a name="l00123"></a>00123       <span class="comment">/* start fetching lines from file until EOF found. */</span>
<a name="l00124"></a>00124       <span class="keywordflow">while</span> (fgets (data_line_init, <a class="code" href="gfs-process-input-files_8c.html#df764cbdea00d65edcd07bb9953ad2b7f3ab3f91f736d88f9c51b8b4a143cb6b">MAX_LINE</a>, listp-&gt;<a class="code" href="structinput__fileT.html#eb1a91dddf0a705640e299ada805f551">ptr</a>) != NULL)
<a name="l00125"></a>00125         {
<a name="l00126"></a>00126           <span class="comment">/* get current line number. */</span>
<a name="l00127"></a>00127           ++curr_line;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129           <span class="comment">/* user wants case insensitive keep</span>
<a name="l00130"></a>00130 <span class="comment">             a lowercase version of the line. */</span>
<a name="l00131"></a>00131           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00132"></a>00132             <a class="code" href="gfs-process-input-files_8c.html#044e6231e3d69752428732e2da59cc5b">strlwr</a> (strcpy (data_line_case, data_line_init));
<a name="l00133"></a>00133 
<a name="l00134"></a>00134           <span class="comment">/* if user wants to display the lines</span>
<a name="l00135"></a>00135 <span class="comment">             that do not match with the pattern. */</span>
<a name="l00136"></a>00136           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#367cc032c8b7f86d94fc8ac8c35b12d2">reverse_match</a>)
<a name="l00137"></a>00137             {
<a name="l00138"></a>00138               <span class="comment">/* if user wants to ignore case distinctions. */</span>
<a name="l00139"></a>00139               <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00140"></a>00140                 {
<a name="l00141"></a>00141                   <span class="keywordflow">if</span> (strstr (data_line_case, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) == NULL)
<a name="l00142"></a>00142                     {
<a name="l00143"></a>00143                       <span class="comment">/* if verbose option is enabled. */</span>
<a name="l00144"></a>00144                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00145"></a>00145                         {
<a name="l00146"></a>00146                           <span class="comment">/* print only when we are in the first line. */</span>
<a name="l00147"></a>00147                           <span class="keywordflow">if</span> (!num_match)
<a name="l00148"></a>00148                             fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150                           <span class="comment">/* print tab space. */</span>
<a name="l00151"></a>00151                           fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#5f4f10c181ca7a50679b56d53890bfda">TAB_SPACE</a>);
<a name="l00152"></a>00152                         }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154                       <span class="comment">/* print the filepath. */</span>
<a name="l00155"></a>00155                       <span class="keywordflow">if</span> (!cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00156"></a>00156                         fprintf (stdout, <span class="stringliteral">"%s:"</span>, listp-&gt;<a class="code" href="structinput__fileT.html#214eacec14e22abf4b0e35884c992276">path</a>);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158                       <span class="comment">/* user wants to print the line number. */</span>
<a name="l00159"></a>00159                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00160"></a>00160                         fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162                       <span class="comment">/* print the data line. */</span>
<a name="l00163"></a>00163                       fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165                       <span class="comment">/* increase the cnt of max</span>
<a name="l00166"></a>00166 <span class="comment">                         matches within the file. */</span>
<a name="l00167"></a>00167                       ++num_match;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169                       <span class="comment">/* this is for informing the caller</span>
<a name="l00170"></a>00170 <span class="comment">                         that at least one match occurred. */</span>
<a name="l00171"></a>00171                       found_match = <span class="keyword">true</span>;
<a name="l00172"></a>00172                     }
<a name="l00173"></a>00173                 }
<a name="l00174"></a>00174               <span class="keywordflow">else</span>
<a name="l00175"></a>00175                 {
<a name="l00176"></a>00176                   <span class="keywordflow">if</span> (strstr (data_line_init, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) == NULL)
<a name="l00177"></a>00177                     {
<a name="l00178"></a>00178                       <span class="comment">/* if verbose option is enabled. */</span>
<a name="l00179"></a>00179                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00180"></a>00180                         {
<a name="l00181"></a>00181                           <span class="comment">/* print only when we are in the first line. */</span>
<a name="l00182"></a>00182                           <span class="keywordflow">if</span> (!num_match)
<a name="l00183"></a>00183                             fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185                           <span class="comment">/* print tab space. */</span>
<a name="l00186"></a>00186                           fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#5f4f10c181ca7a50679b56d53890bfda">TAB_SPACE</a>);
<a name="l00187"></a>00187                         }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189                       <span class="comment">/* print the filepath. */</span>
<a name="l00190"></a>00190                       <span class="keywordflow">if</span> (!cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00191"></a>00191                         fprintf (stdout, <span class="stringliteral">"%s:"</span>, listp-&gt;<a class="code" href="structinput__fileT.html#214eacec14e22abf4b0e35884c992276">path</a>);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193                       <span class="comment">/* user wants to print the line number. */</span>
<a name="l00194"></a>00194                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00195"></a>00195                         fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00196"></a>00196 
<a name="l00197"></a>00197                       <span class="comment">/* print the data line. */</span>
<a name="l00198"></a>00198                       fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200                       <span class="comment">/* increase the cnt of max</span>
<a name="l00201"></a>00201 <span class="comment">                         matches within the file. */</span>
<a name="l00202"></a>00202                       ++num_match;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204                       <span class="comment">/* this is for informing the caller</span>
<a name="l00205"></a>00205 <span class="comment">                         that at least one match occurred. */</span>
<a name="l00206"></a>00206                       found_match = <span class="keyword">true</span>;
<a name="l00207"></a>00207                     }
<a name="l00208"></a>00208                 }
<a name="l00209"></a>00209             }
<a name="l00210"></a>00210           <span class="comment">/* otherwise, print the line</span>
<a name="l00211"></a>00211 <span class="comment">             that matches with pattern. */</span>
<a name="l00212"></a>00212           <span class="keywordflow">else</span>
<a name="l00213"></a>00213             {
<a name="l00214"></a>00214               <span class="comment">/* if user wants to ignore case distinctions. */</span>
<a name="l00215"></a>00215               <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#445b3cfd27e22a6f4a423008f80fcf1b">ignore_case</a>)
<a name="l00216"></a>00216                 {
<a name="l00217"></a>00217                   <span class="keywordflow">if</span> (strstr (data_line_case, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) != NULL)
<a name="l00218"></a>00218                     {
<a name="l00219"></a>00219                       <span class="comment">/* if verbose option is enabled. */</span>
<a name="l00220"></a>00220                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00221"></a>00221                         {
<a name="l00222"></a>00222                           <span class="comment">/* print only when we are in the first line. */</span>
<a name="l00223"></a>00223                           <span class="keywordflow">if</span> (!num_match)
<a name="l00224"></a>00224                             fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226                           <span class="comment">/* print tab space. */</span>
<a name="l00227"></a>00227                           fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#5f4f10c181ca7a50679b56d53890bfda">TAB_SPACE</a>);
<a name="l00228"></a>00228                         }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230                       <span class="comment">/* print the filepath. */</span>
<a name="l00231"></a>00231                       <span class="keywordflow">if</span> (!cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00232"></a>00232                         fprintf (stdout, <span class="stringliteral">"%s:"</span>, listp-&gt;<a class="code" href="structinput__fileT.html#214eacec14e22abf4b0e35884c992276">path</a>);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234                       <span class="comment">/* user wants to print the line number. */</span>
<a name="l00235"></a>00235                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00236"></a>00236                         fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238                       <span class="comment">/* print the data line. */</span>
<a name="l00239"></a>00239                       fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241                       <span class="comment">/* increase the cnt of max</span>
<a name="l00242"></a>00242 <span class="comment">                         matches within the file. */</span>
<a name="l00243"></a>00243                       ++num_match;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245                       <span class="comment">/* this is for informing the caller</span>
<a name="l00246"></a>00246 <span class="comment">                         that at least one match occurred. */</span>
<a name="l00247"></a>00247                       found_match = <span class="keyword">true</span>;
<a name="l00248"></a>00248                     }
<a name="l00249"></a>00249                 }
<a name="l00250"></a>00250               <span class="keywordflow">else</span>
<a name="l00251"></a>00251                 {
<a name="l00252"></a>00252                   <span class="keywordflow">if</span> (strstr (data_line_init, cop-&gt;<a class="code" href="structoptionsT.html#fb350ec5a5c15b02807790bad868090c">pattern</a>) != NULL)
<a name="l00253"></a>00253                     {
<a name="l00254"></a>00254                       <span class="comment">/* if verbose option is enabled. */</span>
<a name="l00255"></a>00255                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00256"></a>00256                         {
<a name="l00257"></a>00257                           <span class="comment">/* print only when we are in the first line. */</span>
<a name="l00258"></a>00258                           <span class="keywordflow">if</span> (!num_match)
<a name="l00259"></a>00259                             fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261                           <span class="comment">/* print tab space. */</span>
<a name="l00262"></a>00262                           fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#5f4f10c181ca7a50679b56d53890bfda">TAB_SPACE</a>);
<a name="l00263"></a>00263                         }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265                       <span class="comment">/* print the filepath. */</span>
<a name="l00266"></a>00266                       <span class="keywordflow">if</span> (!cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00267"></a>00267                         fprintf (stdout, <span class="stringliteral">"%s:"</span>, listp-&gt;<a class="code" href="structinput__fileT.html#214eacec14e22abf4b0e35884c992276">path</a>);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269                       <span class="comment">/* user wants to print the line number. */</span>
<a name="l00270"></a>00270                       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#f999a72db895adb144db2fcbbdadf6c6">line_number</a>)
<a name="l00271"></a>00271                         fprintf (stdout, <span class="stringliteral">"%lu:"</span>, curr_line);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273                       <span class="comment">/* print the data line. */</span>
<a name="l00274"></a>00274                       fprintf (stdout, <span class="stringliteral">"%s"</span>, data_line_init);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276                       <span class="comment">/* increase the cnt of max</span>
<a name="l00277"></a>00277 <span class="comment">                         matches within the file. */</span>
<a name="l00278"></a>00278                       ++num_match;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280                       <span class="comment">/* this is for informing the caller</span>
<a name="l00281"></a>00281 <span class="comment">                         that at least one match occurred. */</span>
<a name="l00282"></a>00282                       found_match = <span class="keyword">true</span>;
<a name="l00283"></a>00283                     }
<a name="l00284"></a>00284                 }
<a name="l00285"></a>00285             }
<a name="l00286"></a>00286         }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288       <span class="comment">/* now print a newline only if at least one</span>
<a name="l00289"></a>00289 <span class="comment">         match found and this isn't the last file. */</span>
<a name="l00290"></a>00290       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a> &amp;&amp; num_match)
<a name="l00291"></a>00291         <span class="keywordflow">if</span> (listp-&gt;<a class="code" href="structinput__fileT.html#512580cef586042233fd96943124bb41">next</a> != NULL)
<a name="l00292"></a>00292           fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294       <span class="comment">/* if user wants to print the number of matches. */</span>
<a name="l00295"></a>00295       <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#c27b7ce68def681e2bb1c747e3aec856">max_matches</a> &amp;&amp; num_match)
<a name="l00296"></a>00296         {
<a name="l00297"></a>00297           <span class="comment">/* if verbose option is enabled</span>
<a name="l00298"></a>00298 <span class="comment">             and this is the last file. */</span>
<a name="l00299"></a>00299           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a> &amp;&amp; (listp-&gt;<a class="code" href="structinput__fileT.html#512580cef586042233fd96943124bb41">next</a> == NULL))
<a name="l00300"></a>00300             fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00301"></a>00301 
<a name="l00302"></a>00302           <span class="comment">/* if verbose option is enabled. */</span>
<a name="l00303"></a>00303           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a>)
<a name="l00304"></a>00304             fprintf (stdout, <span class="stringliteral">"%s"</span>, <span class="stringliteral">"   "</span>);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306           fprintf (stdout, <span class="stringliteral">"%s %lu.%s"</span>, <a class="code" href="gfs-i18n-macros_8h.html#32a3cf3d9dd914f5aeeca5423c157934">_</a>(show_max_matches), num_match,
<a name="l00307"></a>00307                    <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00308"></a>00308 
<a name="l00309"></a>00309           <span class="comment">/* if verbose option is enabled</span>
<a name="l00310"></a>00310 <span class="comment">             and this isn't the last file. */</span>
<a name="l00311"></a>00311           <span class="keywordflow">if</span> (cop-&gt;<a class="code" href="structoptionsT.html#50852142e316865591b485582a899282">verbose</a> &amp;&amp; (listp-&gt;<a class="code" href="structinput__fileT.html#512580cef586042233fd96943124bb41">next</a> != NULL))
<a name="l00312"></a>00312             fprintf (stdout, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315       <span class="comment">/* zero counters. */</span>
<a name="l00316"></a>00316       curr_line = num_match = 0L;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318       <span class="comment">/* close input file pointer. */</span>
<a name="l00319"></a>00319       <span class="keywordflow">if</span> (listp-&gt;<a class="code" href="structinput__fileT.html#eb1a91dddf0a705640e299ada805f551">ptr</a> != NULL)
<a name="l00320"></a>00320         fclose (listp-&gt;<a class="code" href="structinput__fileT.html#eb1a91dddf0a705640e299ada805f551">ptr</a>);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322       <span class="comment">/* move to the next list node. */</span>
<a name="l00323"></a>00323       listp = listp-&gt;<a class="code" href="structinput__fileT.html#512580cef586042233fd96943124bb41">next</a>;
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326   <span class="comment">/* return status to the caller. */</span>
<a name="l00327"></a>00327   <span class="keywordflow">return</span> found_match;
<a name="l00328"></a>00328 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="044e6231e3d69752428732e2da59cc5b"></a><!-- doxytag: member="gfs-process-input-files.c::strlwr" ref="044e6231e3d69752428732e2da59cc5b" args="(char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char * strlwr           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that gets a string and returns it in lowercase. 
<p>
This function tries to lowercase each character of `s' string. So, creates a new string with the new version of lowercase characters. After that, it returns it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>a pointer to a character.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a pointer to a character. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-process-input-files_8c-source.html#l00503">503</a> of file <a class="el" href="gfs-process-input-files_8c-source.html">gfs-process-input-files.c</a>.
<p>
Referenced by <a class="el" href="gfs-process-input-files_8c-source.html#l00347">process_input_file()</a>, and <a class="el" href="gfs-process-input-files_8c-source.html#l00077">process_input_files()</a>.<div class="fragment"><pre class="fragment"><a name="l00504"></a>00504 {
<a name="l00505"></a>00505   <span class="comment">/* if the string is not empty. */</span>
<a name="l00506"></a>00506   <span class="keywordflow">if</span> (str != NULL)
<a name="l00507"></a>00507     {
<a name="l00508"></a>00508       <span class="keywordtype">char</span> *p;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510       <span class="comment">/* try to lowercase all chars. */</span>
<a name="l00511"></a>00511       <span class="keywordflow">for</span> (p = str; *p != <span class="charliteral">'\0'</span>; p++)
<a name="l00512"></a>00512         *p = tolower (*p);
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514 
<a name="l00515"></a>00515   <span class="comment">/* return the string. */</span>
<a name="l00516"></a>00516   <span class="keywordflow">return</span> str;
<a name="l00517"></a>00517 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed May 7 19:14:36 2008 for GNU find string by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
