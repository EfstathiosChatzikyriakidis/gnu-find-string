<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GNU find string: src/gfs-error-wrapper-funcs.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<h1>src/gfs-error-wrapper-funcs.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This interface deals with the error wrapper functions. 
<p>

<p>
Definition in file <a class="el" href="gfs-error-wrapper-funcs_8c-source.html">gfs-error-wrapper-funcs.c</a>.
<p>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &quot;<a class="el" href="gfs-defines_8h-source.html">gfs-defines.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="gfs-input-files-list_8h-source.html">gfs-input-files-list.h</a>&quot;</code><br>

<p>
<a href="gfs-error-wrapper-funcs_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-error-wrapper-funcs_8c.html#0851185230e177c7e230ce26f3999649">eprintf</a> (char *fmt,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that prints an error message and exits.  <a href="#0851185230e177c7e230ce26f3999649"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-error-wrapper-funcs_8c.html#f7830d577a419aed84eeb42a789fbd98">weprintf</a> (char *fmt,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that prints a warning message.  <a href="#f7830d577a419aed84eeb42a789fbd98"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FILE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-error-wrapper-funcs_8c.html#db1ec23800a30e261493f972cf509284">efopen</a> (const char *filepath, const char *mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that opens a file and checks for error.  <a href="#db1ec23800a30e261493f972cf509284"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-error-wrapper-funcs_8c.html#3a3951e2ff079ef0e90e1e98504d1226">estrdup</a> (const char *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that duplicates a string and checks for error.  <a href="#3a3951e2ff079ef0e90e1e98504d1226"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gfs-error-wrapper-funcs_8c.html#ff1cc0faca8eb2b67f0f1a384981ea05">emalloc</a> (size_t size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that allocates memory space and checks for error.  <a href="#ff1cc0faca8eb2b67f0f1a384981ea05"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="db1ec23800a30e261493f972cf509284"></a><!-- doxytag: member="gfs-error-wrapper-funcs.c::efopen" ref="db1ec23800a30e261493f972cf509284" args="(const char *filepath, const char *mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE * efopen           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that opens a file and checks for error. 
<p>
This function tries to open a file (`filepath') with mode (`mode'). If the file open then returns the pointer to the file. Otherwise, prints an error message and returns NULL.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>a pointer to a constant character. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>a pointer to a constant character.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to a `FILE' data structure. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00235">235</a> of file <a class="el" href="gfs-error-wrapper-funcs_8c-source.html">gfs-error-wrapper-funcs.c</a>.
<p>
References <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00126">weprintf()</a>.
<p>
Referenced by <a class="el" href="gfs-input-files-tasks_8c-source.html#l00139">file_regular()</a>, <a class="el" href="gfs_8c-source.html#l00083">main()</a>, and <a class="el" href="gfs-process-input-files_8c-source.html#l00077">process_input_files()</a>.<div class="fragment"><pre class="fragment"><a name="l00236"></a>00236 {
<a name="l00237"></a>00237   <span class="comment">/* local variables. */</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="comment">/* file pointer. */</span>
<a name="l00240"></a>00240   FILE *fp = NULL;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="comment">/* try to open the file. */</span>
<a name="l00243"></a>00243   fp = fopen (filepath, mode);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <span class="comment">/* if the file is opened return a pointer to it. */</span>
<a name="l00246"></a>00246   <span class="keywordflow">if</span> (fp != NULL)
<a name="l00247"></a>00247     <span class="keywordflow">return</span> fp;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   <span class="comment">/* print a warning why the file can't open. */</span>
<a name="l00250"></a>00250   <a class="code" href="gfs-error-wrapper-funcs_8c.html#f7830d577a419aed84eeb42a789fbd98">weprintf</a> (<span class="stringliteral">"fopen(\"%.500s\") failed:"</span>, filepath);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   <span class="comment">/* the file can't open. */</span>
<a name="l00253"></a>00253   <span class="keywordflow">return</span> fp;
<a name="l00254"></a>00254 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ff1cc0faca8eb2b67f0f1a384981ea05"></a><!-- doxytag: member="gfs-error-wrapper-funcs.c::emalloc" ref="ff1cc0faca8eb2b67f0f1a384981ea05" args="(size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * emalloc           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that allocates memory space and checks for error. 
<p>
This function tries to allocate memory space of `size' bytes. If an error occur then prints an error message and exits. Otherwise, returns the pointer of the first byte of the allocated memory space.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>a `size_t' type definition.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to void. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00207">207</a> of file <a class="el" href="gfs-error-wrapper-funcs_8c-source.html">gfs-error-wrapper-funcs.c</a>.
<p>
References <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00063">eprintf()</a>.
<p>
Referenced by <a class="el" href="gfs-input-files-list_8c-source.html#l00063">new_input_file()</a>, and <a class="el" href="gfs-parse-options_8c-source.html#l00183">new_options()</a>.<div class="fragment"><pre class="fragment"><a name="l00208"></a>00208 {
<a name="l00209"></a>00209   <span class="comment">/* allocate enough memory space. */</span>
<a name="l00210"></a>00210   <span class="keywordtype">void</span> *ptr = malloc (size);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212   <span class="comment">/* if memory allocation fail. */</span>
<a name="l00213"></a>00213   <span class="keywordflow">if</span> (ptr == NULL)
<a name="l00214"></a>00214     <a class="code" href="gfs-error-wrapper-funcs_8c.html#0851185230e177c7e230ce26f3999649">eprintf</a> (<span class="stringliteral">"malloc(%u) failed:"</span>, size);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <span class="comment">/* return the pointer. */</span>
<a name="l00217"></a>00217   <span class="keywordflow">return</span> ptr;
<a name="l00218"></a>00218 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0851185230e177c7e230ce26f3999649"></a><!-- doxytag: member="gfs-error-wrapper-funcs.c::eprintf" ref="0851185230e177c7e230ce26f3999649" args="(char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eprintf           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that prints an error message and exits. 
<p>
This function gets a formatted `fmt' arguments list `args' and tries to print an error message. If the program has a name then prints it at the beginning of the line. Also, if the user wants to print the reason of the error, then the function does it. At the end, the function deallocates the input files linked list and exits with an error code.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>a pointer to a character. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>an arguments list. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00063">63</a> of file <a class="el" href="gfs-error-wrapper-funcs_8c-source.html">gfs-error-wrapper-funcs.c</a>.
<p>
References <a class="el" href="gfs-defines_8h-source.html#l00059">EXIT_ERROR</a>, <a class="el" href="gfs-input-files-list_8c-source.html#l00156">free_input_files()</a>, <a class="el" href="gfs-handle-program-name_8c-source.html#l00053">get_prog_name()</a>, <a class="el" href="gfs_8c-source.html#l00068">input_files_list</a>, and <a class="el" href="gfs-defines_8h-source.html#l00069">NEW_LINE</a>.
<p>
Referenced by <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00207">emalloc()</a>, <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00177">estrdup()</a>, and <a class="el" href="gfs_8c-source.html#l00083">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00064"></a>00064 {
<a name="l00065"></a>00065   <span class="comment">/* externs. */</span>
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   <span class="comment">/* function externs. */</span>
<a name="l00068"></a>00068   <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="gfs-input-files-list_8c.html#3b8ad163a945326c2ab8af4c56576db5">free_input_files</a> (<a class="code" href="structinput__fileT.html">INPUT_FILES</a> *);
<a name="l00069"></a>00069   <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="gfs-handle-program-name_8c.html#3b7cc0d8ba9d188b5b9e7de54a00bdd6">get_prog_name</a> (<span class="keywordtype">void</span>);
<a name="l00070"></a>00070 
<a name="l00071"></a>00071   <span class="comment">/* variables externs. */</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073   <span class="comment">/* the input files linked list. */</span>
<a name="l00074"></a>00074   <span class="keyword">extern</span> <a class="code" href="structinput__fileT.html">INPUT_FILES</a> *<a class="code" href="gfs_8c.html#0a72c51b0f4728dc8ba9159663f7992b">input_files_list</a>;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="comment">/* points to each unnamed arg in turn. */</span>
<a name="l00077"></a>00077   va_list args;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <span class="comment">/* flush the standard output. */</span>
<a name="l00080"></a>00080   fflush (stdout);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082   <span class="comment">/* if there is a program name print it. */</span>
<a name="l00083"></a>00083   <span class="keywordflow">if</span> (<a class="code" href="gfs-handle-program-name_8c.html#3b7cc0d8ba9d188b5b9e7de54a00bdd6">get_prog_name</a> () != NULL)
<a name="l00084"></a>00084     fprintf (stderr, <span class="stringliteral">"%s: "</span>, <a class="code" href="gfs-handle-program-name_8c.html#3b7cc0d8ba9d188b5b9e7de54a00bdd6">get_prog_name</a> ());
<a name="l00085"></a>00085 
<a name="l00086"></a>00086   <span class="comment">/* make up point to 1st unnamed arg. */</span>
<a name="l00087"></a>00087   va_start (args, fmt);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="comment">/* print `args' according to `fmt'. */</span>
<a name="l00090"></a>00090   vfprintf (stderr, fmt, args);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="comment">/* clean up when done. */</span>
<a name="l00093"></a>00093   va_end (args);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095   <span class="comment">/* if the `fmt' isn't empty and the last char</span>
<a name="l00096"></a>00096 <span class="comment">     of it, is `:' then print an error message</span>
<a name="l00097"></a>00097 <span class="comment">     according to the `errno' last value. */</span>
<a name="l00098"></a>00098   <span class="keywordflow">if</span> (fmt[0] != <span class="charliteral">'\0'</span> &amp;&amp; fmt[strlen (fmt) - 1] == <span class="charliteral">':'</span>)
<a name="l00099"></a>00099     fprintf (stderr, <span class="stringliteral">" %s."</span>, strerror (errno));
<a name="l00100"></a>00100 
<a name="l00101"></a>00101   <span class="comment">/* print a new line. */</span>
<a name="l00102"></a>00102   fprintf (stderr, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   <span class="comment">/* free input files linked list. */</span>
<a name="l00105"></a>00105   <a class="code" href="gfs-input-files-list_8c.html#3b8ad163a945326c2ab8af4c56576db5">free_input_files</a> (<a class="code" href="gfs_8c.html#0a72c51b0f4728dc8ba9159663f7992b">input_files_list</a>);
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   <span class="comment">/* exit the program. */</span>
<a name="l00108"></a>00108   exit (<a class="code" href="gfs-defines_8h.html#036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);
<a name="l00109"></a>00109 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3a3951e2ff079ef0e90e1e98504d1226"></a><!-- doxytag: member="gfs-error-wrapper-funcs.c::estrdup" ref="3a3951e2ff079ef0e90e1e98504d1226" args="(const char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * estrdup           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that duplicates a string and checks for error. 
<p>
This function tries to allocate enough memory space in order to duplicate the `str' string. If an error occur, then prints the error message and exits. Otherwise, duplicates the string and returns a pointer to it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>a pointer to a constant character.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to a character. </dd></dl>

<p>
Definition at line <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00177">177</a> of file <a class="el" href="gfs-error-wrapper-funcs_8c-source.html">gfs-error-wrapper-funcs.c</a>.
<p>
References <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00063">eprintf()</a>.
<p>
Referenced by <a class="el" href="gfs-input-files-list_8c-source.html#l00063">new_input_file()</a>, <a class="el" href="gfs-parse-options_8c-source.html#l00060">parse_options()</a>, and <a class="el" href="gfs-handle-program-name_8c-source.html#l00066">set_prog_name()</a>.<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 {
<a name="l00179"></a>00179   <span class="comment">/* allocate enough memory space. */</span>
<a name="l00180"></a>00180   <span class="keywordtype">char</span> *tmp = (<span class="keywordtype">char</span> *) malloc (strlen (str) + 1);
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   <span class="comment">/* if memory allocation fail. */</span>
<a name="l00183"></a>00183   <span class="keywordflow">if</span> (tmp == NULL)
<a name="l00184"></a>00184     <a class="code" href="gfs-error-wrapper-funcs_8c.html#0851185230e177c7e230ce26f3999649">eprintf</a> (<span class="stringliteral">"estrdup(\"%.500s\") failed:"</span>, str);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">/* copy the string. */</span>
<a name="l00187"></a>00187   strcpy (tmp, str);
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="comment">/* return the string. */</span>
<a name="l00190"></a>00190   <span class="keywordflow">return</span> tmp;
<a name="l00191"></a>00191 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f7830d577a419aed84eeb42a789fbd98"></a><!-- doxytag: member="gfs-error-wrapper-funcs.c::weprintf" ref="f7830d577a419aed84eeb42a789fbd98" args="(char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weprintf           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A function that prints a warning message. 
<p>
This function gets a formatted `fmt' arguments list `args' and tries to print a warning message. If the program has a name then prints it at the beginning of the line. Also, if the user wants to print the reason of the error, then the function does it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>a pointer to a character. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>an arguments list. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00126">126</a> of file <a class="el" href="gfs-error-wrapper-funcs_8c-source.html">gfs-error-wrapper-funcs.c</a>.
<p>
References <a class="el" href="gfs-handle-program-name_8c-source.html#l00053">get_prog_name()</a>, and <a class="el" href="gfs-defines_8h-source.html#l00069">NEW_LINE</a>.
<p>
Referenced by <a class="el" href="gfs-error-wrapper-funcs_8c-source.html#l00235">efopen()</a>.<div class="fragment"><pre class="fragment"><a name="l00127"></a>00127 {
<a name="l00128"></a>00128   <span class="comment">/* externs. */</span>
<a name="l00129"></a>00129 
<a name="l00130"></a>00130   <span class="comment">/* function externs. */</span>
<a name="l00131"></a>00131   <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="gfs-handle-program-name_8c.html#3b7cc0d8ba9d188b5b9e7de54a00bdd6">get_prog_name</a> (<span class="keywordtype">void</span>);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133   <span class="comment">/* points to each unnamed arg in turn. */</span>
<a name="l00134"></a>00134   va_list args;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136   <span class="comment">/* flush the standard output. */</span>
<a name="l00137"></a>00137   fflush (stdout);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   <span class="comment">/* if there is a program name print it. */</span>
<a name="l00140"></a>00140   <span class="keywordflow">if</span> (<a class="code" href="gfs-handle-program-name_8c.html#3b7cc0d8ba9d188b5b9e7de54a00bdd6">get_prog_name</a> () != NULL)
<a name="l00141"></a>00141     fprintf (stderr, <span class="stringliteral">"%s: "</span>, <a class="code" href="gfs-handle-program-name_8c.html#3b7cc0d8ba9d188b5b9e7de54a00bdd6">get_prog_name</a> ());
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   <span class="comment">/* make up point to 1st unnamed arg. */</span>
<a name="l00144"></a>00144   va_start (args, fmt);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   <span class="comment">/* print `args' according to `fmt'. */</span>
<a name="l00147"></a>00147   vfprintf (stderr, fmt, args);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   <span class="comment">/* clean up when done. */</span>
<a name="l00150"></a>00150   va_end (args);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="comment">/* if the `fmt' isn't empty and the last char</span>
<a name="l00153"></a>00153 <span class="comment">     of it, is `:' then print an error message</span>
<a name="l00154"></a>00154 <span class="comment">     according to the `errno' last value. */</span>
<a name="l00155"></a>00155   <span class="keywordflow">if</span> (fmt[0] != <span class="charliteral">'\0'</span> &amp;&amp; fmt[strlen (fmt) - 1] == <span class="charliteral">':'</span>)
<a name="l00156"></a>00156     fprintf (stderr, <span class="stringliteral">" %s."</span>, strerror (errno));
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   <span class="comment">/* print a new line. */</span>
<a name="l00159"></a>00159   fprintf (stderr, <span class="stringliteral">"%s"</span>, <a class="code" href="gfs-defines_8h.html#7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>);
<a name="l00160"></a>00160 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed May 7 19:14:36 2008 for GNU find string by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
